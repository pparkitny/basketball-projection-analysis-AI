{%extends "interface/base.html"%}
{% load static %}
{%block title%} Basketball projection analysis AI {%endblock%} 
{%block content%}

<header>

    <div id="main" class="main-content">
      <div class="logo-div">
        <img  src="{% static 'interface/img/logo1.png' %}">
      </div>
      <div class="logo-name-div">
        BASKETBALL <br/>PROJECTION<br/> ANALYSIS
      </div>
    </div>

    <div class="logo-description-div">
      "Basketball projection analysis" to aplikacja, <br/> która używa sztucznej inteligencji do analizowania rzutu piłki do kosza.
    </div>

    <div class="logo-text-div">
      Kliknij w przycisk i zobacz!
    </div>

    <div class="logo-icon">
      <div class="icon-div1">
        <a href="#" id="link0"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          viewBox="0 0 490.4 490.4" style="enable-background:new 0 0 490.4 490.4;" xml:space="preserve">
       <g>
         <g>
           <path d="M490.4,245.2C490.4,110,380.4,0,245.2,0S0,110,0,245.2s110,245.2,245.2,245.2S490.4,380.4,490.4,245.2z M24.5,245.2
             c0-121.7,99-220.7,220.7-220.7s220.7,99,220.7,220.7s-99,220.7-220.7,220.7S24.5,366.9,24.5,245.2z"/>
           <path d="M253.9,360.4l68.9-68.9c4.8-4.8,4.8-12.5,0-17.3s-12.5-4.8-17.3,0l-48,48V138.7c0-6.8-5.5-12.3-12.3-12.3
             s-12.3,5.5-12.3,12.3v183.4l-48-48c-4.8-4.8-12.5-4.8-17.3,0s-4.8,12.5,0,17.3l68.9,68.9c2.4,2.4,5.5,3.6,8.7,3.6
             S251.5,362.8,253.9,360.4z"/>
         </g>
       </g>
       </svg>
       </a>
      </div>
    </div>

</header>

<main>

  <nav  class="nav-main">

  <div class="logo-nav">
    <a href="#" id='link6'><img src="{% static 'interface/img/logo2.png' %}"></a>
  </div>
  
  <div class="nav-menu">

      <div href="#" id="link1" class="nav-menu-item">
        O PROJEKCIE
      </div>

      <div href="#" id="link2" class="nav-menu-item">
        INSTRUKCJA
      </div>
      <div href="#" id="link3" class="nav-menu-item">
        PRZEŚLIJ PLIK
      </div>
      <div href="#" id="link4" class="nav-menu-item"  style ="display: none;">
        ANALIZA
      </div>
      <div href="#" id="link5" class="nav-menu-item">
        AUTORZY
      </div>
  </div>

  </nav>

  <div class="content-div">

    <div id="about" class="section-div-1">

      <div class="section-text">O PROJEKCIE</div>

        <div class="about-text">
          Projekt powstał podczas pisania pracy inżynierskiej. 
        </br>
          Głównym założeniem projektu jest umożliwienie sportowcom dokładnej analizy ruchu ich ciała podczas rzutu osobistego. 
        </br>
          Projekt został napisany w języku Python.
        </br>
          Backend strony został napisany przy pomocy framework-a Django, 
          namomiast frontend w języku HTML, CSS i Javascript (wraz z biblioteką JQuery).
        </br>
          Wykorzystaliśmy bibliotekę OpenPose oraz model YOLO.
        </br>
          W planach jest rozwinięcie projektu o inne dyscypliny sportowe.

        </div>
  
    </div>

    <div id="howto" class="section-div-2">

      <div class="section-text">INSTRUKCJA</div>

        <div class="howto-text">
          W sekcji "Prześlij plik" należy dodać plik ".mp4", który chcemy przeanalizować. 
        </br>
        Im dłuższy film, tym dłużej będzie trwała analiza. 
        </br>
        Po poprawnym przesłaniu pliku pojawi się pasek postępu i zacznie wykonywać się analiza.
        </br>
        Gdy wykona się cała analiza, a pasek postępu całkowicie się wypełni, 
        pojawi się sekcja "Analiza" w której znajdują się cztery filmy, cztery zdjęcia oraz tekstowa analiza rzutu.
        </br>
        W celu przeanalizowania innego pliku należy zresetować plik "celery.bat" oraz odświeżyć tą stronę.

         </div>

      </div>

    <div id="upload" class="section-div-1">

      <div class="section-text">PRZEŚLIJ PLIK</div>

      <div class="upload-div">

        <form method="POST" action="upload/" id="file-upload-form" class="uploader">
        {%csrf_token%}
          <input id="file-upload" type="file" name="fileUpload" accept="video/mp4" />
    
          <label for="file-upload" id="file-drag">
            <div id="start">
              <div class="upload-text">
                <i class="fa fa-download" aria-hidden="true"></i>
                <div>Wybierz plik lub przeciągnij go tutaj</div>
                <div id="notimage" class="hidden">Wybierz wideo</div>
              </div>
            </div>
            <div id="response" class="hidden">
              <div id="messages"></div>
              <progress class="progress" id="file-progress" value="0">
                <span id="file-progress-procent">0</span>%
              </progress>
            </div>
          </label>
        </form>
        
      </div>

    </div> 


    <div id="analysis" class="section-div-analysis" style ="display: none;">

      <div class="section-text-analysis">ANALIZA</div>
      <div id="section-text-analysis-content"></div>

    </div>

    <div id="authors" class="section-div-2">

      <div class="section-text">AUTORZY</div>

    <div class="authors-container">
      <div class="authors">
        <div class="authors-text">
          <i class="material-icons">person</i>
        </div>
        <div class="authors-text">
          Anita Szumiec
        </div>
      </div>

      <div class="authors">
        <div class="authors-text">
          <i class="material-icons">person</i>
        </div>
        <div class="authors-text">
          Bartłomiej Madejski
        </div>
      </div>

      <div class="authors">
        <div class="authors-text">
          <i class="material-icons">person</i>
        </div>
        <div class="authors-text">
          Patryk Parkitny
        </div>
      </div>

    </div>

  </div>

</main>

<script src="https://vjs.zencdn.net/7.10.2/video.js"></script>

  <script>

    $(document).ready(function(){
    $('.modal').modal();
  });

  </script>
  <script src="{% static 'interface/js/jqscrollto.js' %}"></script>

  <script>
    function AnalysisDone(result){
      var text2 = "<div id=\'video-content\'> <div id=\'row2\'> <div class=\'video-div\' id=\'column\'> <p>Wideo wejściowe</p> <video id=\'my-video\' class=\'video-js\' controls preload=\'auto\' width=\'640\' height=\'264\' data-setup=\'{}\' > <source src=\'{% static 'interface/video/video-frames.mp4' %}\' type=\'video/mp4\' /> <p class=\'vjs-no-js\'> To view this video please enable JavaScript, and consider upgrading to a web browser that <a href=\'https://videojs.com/html5-video-support/\' target=\'_blank\' >supports HTML5 video</a > </p> </video> </div> <div class=\'video-div\' id=\'column\'> <p>YOLO</p> <video id=\'my-video\' class=\'video-js\' controls preload=\'auto\' width=\'640\' height=\'264\' data-setup=\'{}\' > <source src=\'{% static 'interface/video/video-yolo.mp4' %}\' type=\'video/mp4\' /> <p class=\'vjs-no-js\'> To view this video please enable JavaScript, and consider upgrading to a web browser that <a href=\'https://videojs.com/html5-video-support/\' target=\'_blank\' >supports HTML5 video</a > </p> </video> </div> </div> <div id=\'row2\'> <div class=\'video-div\' id=\'column\'> <p>Trajektoria rzutu piłki</p> <video id=\'my-video\' class=\'video-js\' controls preload=\'auto\' width=\'640\' height=\'264\' data-setup=\'{}\' > <source src=\'{% static 'interface/video/trajektoria.mp4' %}\' type=\'video/mp4\' /> <p class=\'vjs-no-js\'> To view this video please enable JavaScript, and consider upgrading to a web browser that <a href=\'https://videojs.com/html5-video-support/\' target=\'_blank\' >supports HTML5 video</a > </p> </video> </div> <div class=\'video-div\' id=\'column\'> <p>Openpose</p> <video id=\'my-video\' class=\'video-js\' controls preload=\'auto\' width=\'640\' height=\'264\' data-setup=\'{}\' > <source src=\'{% static 'interface/video/video-openpose-converted.mp4' %}\' type=\'video/mp4\' /> <p class=\'vjs-no-js\'> To view this video please enable JavaScript, and consider upgrading to a web browser that <a href=\'https://videojs.com/html5-video-support/\' target=\'_blank\' >supports HTML5 video</a > </p> </video> </div> </div> </div> <div id=\'image-content\'> <div id=\'row2\'> <div id=\'column2\'> <p>Pozycja 1</p> <img id=\'imgsize\' src=\'{% static 'interface/img/analysis/pozycja_1.jpg' %}\'> </div> <div id=\'column2\'> <p>Pozycja 2</p> <img id=\'imgsize\' src=\'{% static 'interface/img/analysis/pozycja_4.jpg' %}\'> </div> <div id=\'column2\'> <p>Pozycja 3</p> <img id=\'imgsize\' src=\'{% static 'interface/img/analysis/pozycja_2.jpg' %}\'> </div> <div id=\'column2\'> <p>Pozycja 4</p> <img id=\'imgsize\' src=\'{% static 'interface/img/analysis/pozycja_3.jpg' %}\'> </div> </div> </div> <pre id=\'json-content\' style=\'color: white; font-family:Roboto; font-size: 1.5em\'>  </pre>"
      var content = $("#section-text-analysis-content")
      var parent = $("#analysis")
      var sidebar = $("#link4")
      var authors = $("#authors")
      $("#file-upload").attr("disabled", true)
      $("#loader").css("display", "none")
      parent.css("display", "")
      sidebar.css("display", "unset")
      authors.addClass("section-div-1")
      authors.removeClass("section-div-2")
      content.html(text2)
      $("#json-content").html(JSON.stringify(result, undefined, 4).replaceAll("{","").replaceAll("}","").replaceAll("\"","").replaceAll(",",""))
      $.scrollTo($('#analysis').offset().top, 2000);
      }

      function AnalysisNotDone(result){
      var text2 = "<pre id=\'json-content\' style=\'color: white; font-family:Roboto; font-size: 1.5em\'>  </pre> <div style=\'color: white; font-family:Roboto; font-size: 1.5em\'>   Sprawdź czy na filmie znajduje się jedna osoba oraz czy film został nagrany według wytycznych. </div> "
      var content = $("#section-text-analysis-content")
      var parent = $("#analysis")
      var sidebar = $("#link4")
      var authors = $("#authors")
      $("#file-upload").attr("disabled", true)
      $("#loader").css("display", "none")
      parent.css("display", "")
      sidebar.css("display", "unset")
      authors.addClass("section-div-1")
      authors.removeClass("section-div-2")
      content.html(text2)
      $("#json-content").html(JSON.stringify(result, undefined, 4).replaceAll("{","").replaceAll("}","").replaceAll("\"","").replaceAll(",",""))
      $.scrollTo($('#analysis').offset().top, 2000);
      }
    </script>
{%endblock%}
